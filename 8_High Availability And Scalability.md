## Vertical Scalability
* Increasing the hardware limit
* Using t2.large instance
* Means increasing the size of the instance
* Junior Operator vs Sr. Operator (call center example)
* Big databse systems
* Scale Up and Scale down

----------------------------------------
## Horizontal Scalability
* Increasing the num of instances
* Very common in modern web applications
* Autoscaling. Load balancer
----------------------------------------

### High Av means running the instances in the multiple Availability zones or data centers.

### Load Balancer
<img width="855" alt="image" src="https://user-images.githubusercontent.com/84832/217798903-7bf767b8-5c20-4bf8-aeb1-db3fca6bdc4d.png">


* Application Load Balancer
* Network Load Balancer
* Gateway load balancer


### Application Load Balancer
  * When you create ALB, you create target groups, of EC2 instances, and link the target group with ALB
  * If one of the EC2 in the target group goes down, ALB will only redirect to one that is UP
  * Edit Inbound security group rules of HTTP SG to allow traffic only from load balancer, for this, 
    assign the SG of load balancer to the HTTP security group.
    
### Network Load Balancer
<img width="935" alt="image" src="https://user-images.githubusercontent.com/84832/219869728-48d682cf-fba3-4711-b0ef-010fb408031e.png">

* NLB has one static IP per AZ, supports assigning Elastic IP
* You need to modify SG in order to allow traffic from NLB, then the EC2 instances in the target group will show in healthy state

```
Only Network Load Balancer provides both static DNS name and static IP. While, Application Load Balancer provides a static DNS name but it does NOT provide a static IP. The reason being that AWS wants your Elastic Load Balancer to be accessible using a static endpoint, even if the underlying infrastructure that AWS manages changes.
```

### Gateway load Balancer

* 3rd party virtual appliances
* You want to inspect the traffic before it goes in.
* To detect intrusion detection
* First traffic goes through GLB, virtual appliances like Firewall and then to Target groups
* Operates at IP layer
* GENEVE protocol 

### Sticky Sessions (Sessions Affinity)

* Client always access the same EC2 instance through ALB
* Application based cookies and Duration based cookies
* 1. Application based cookies 2. Duration based cookies
* Duration based are generated by Load balancers
* Application based cookies - i) Custom cookie ii) Application cookie
* Name of cookies set by load balancer is fixed
* Custom cookie sent by the client is set through target group settings of EC2

### Cross Zone Load Balancing

* Load Balancer hands on screenshot

![20230219_191613](https://user-images.githubusercontent.com/84832/219952292-44482d9f-111f-4273-8104-666fed7fe16b.jpg)

 * CZLB is enabled by default for ALB, it can be turned off from target group setting.
 * CZLB is disabled by default for gateway and network load balancers

### ELB - SSL Certificates

* TLS is a new version of SSL, but people still refer to as SSL
* SNI (Server name indication) - How load multiple SSL on one server, to serve multiple websites
* To configure in ALB, we just need to add a listener
* Import the certificate, and it will imported to ACM (Amazon certificate managment)

### ELB - Connection Draining / Deregistration Delay
* EC2 instance is set on Draining, then ALB will send requests to other EC2 instances.
* It will handle the existing requests before draining out.

### Autoscaling
* Based on metric like Avg CPU time, alarms, autoscaling group can be scaled out(add) or sclaed in (remove)
* ASG is linked to target group, which is connected to ALB
* A target group has one or more EC2 instances
* ASG scales in and scales out as per settings in the details section
* Max capacity, Desired capacity, Min capacity are the attributes
* 




